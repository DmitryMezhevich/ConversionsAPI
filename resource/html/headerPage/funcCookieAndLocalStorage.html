<!--
    funcCookieAndLocalStorage.html
    
    Функции для работы с Cookie и localStorage
-->

<script>
    function getCookie(name) {
        var decodedCookie = decodeURIComponent(document.cookie);
        var cookies = decodedCookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            if (cookie.indexOf(name + '=') === 0) {
                return cookie.substring(name.length + 1);
            }
        }
        return null;
    }

    function setCookieEventID() {
        const _eventID = window.getUUIDv4();
        setCookie('_plEventID', _eventID, 90 * 24 * 60);
        return _eventID;
    }

    function setCookieExternaID() {
        const _eventID = window.getUUIDv4();
        setCookie('_plExternaID', _eventID, 90 * 24 * 60);
        return _eventID;
    }

    function setCookie(name, value, timeIntervalMinute) {
        var currentDate = new Date();
        var expirationDate = new Date(
            currentDate.getTime() + timeIntervalMinute * 60 * 1000
        );
        var expires = 'expires=' + expirationDate.toUTCString();
        document.cookie = `${name}=${value}; ${expires}; path=/`;
    }

    function setLocalStoregeJSON(key, model) {
        localStorage.setItem(key, JSON.stringify(model));
    }

    function setLocalStorege(key, value) {
        localStorage.setItem(key, value);
    }

    function getLocalStoregeJSON(key) {
        const model = localStorage.getItem(key);
        return JSON.parse(model);
    }

    function getLocalStorege(key) {
        return localStorage.getItem(key);
    }
</script>
